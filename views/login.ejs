<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Enrollment Form</title>
    <link rel="stylesheet" href="../stylesheets/style.css">
</head>
<body>
    <div class="form-container">
        <h1>College Student Enrollment</h1>
        <form action="#" method="post">
            <!-- Personal Details -->
            <fieldset>
                <legend>Personal Details</legend>
                <label for="firstName">First Name:</label>
                <input type="text" id="firstName" name="firstName" required>
                
                <label for="lastName">Last Name:</label>
                <input type="text" id="lastName" name="lastName" required>
                
                <label for="dob">Date of Birth:</label>
                <input type="date" id="dob" name="dob" required>
                
                <label for="gender">Gender:</label>
                <select id="gender" name="gender" required>
                    <option value="">Select</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                </select>
            </fieldset>

            <!-- Academic Details -->
            <fieldset>
                <legend>Academic Details</legend>
                <label for="course">Course Enrolling In:</label>
                <select id="course" name="course" required>
                    <option value="">Select</option>
                    <option value="btech">B.Tech</option>
                    <option value="bsc">B.Sc</option>
                    <option value="bcom">B.Com</option>
                    <option value="ba">B.A</option>
                </select>

                <label for="year">Enrollment Year:</label>
                <input type="number" id="year" name="year" min="2000" max="2100" required>

                <label for="percentage">Percentage in Previous Qualification:</label>
                <input type="number" id="percentage" name="percentage" min="0" max="100" step="0.1" required>
            </fieldset>

            <!-- Contact Details -->
            <fieldset>
                <legend>Contact Details</legend>
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
                
                <label for="phone">Phone Number:</label>
                <input type="tel" id="phone" name="phone" pattern="[0-9]{10}" placeholder="10-digit number" required>

                <label for="address">Address:</label>
                <textarea id="address" name="address" rows="4" required></textarea>
            </fieldset>

            <!-- Submit Button -->
            <button type="submit" id="submitBtn">Submit</button>
        </form>
    </div>
</body>
</html>


    <script>
        const list = document.querySelectorAll('.list')

        function activeLink() {
            list.forEach((item) =>
                item.classList.remove('active'));
            this.classList.add('active');
        }
        list.forEach((item) =>
            item.addEventListener('click', activeLink))
    </script>

    <script src=" https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
                        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
                        crossorigin="anonymous"></script>

                        <script type="module"
                            src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
                        <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>


<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.querySelector('form');
    
        form.addEventListener('submit', async (event) => {
            event.preventDefault(); // Prevent default form submission
    
            // Gather form data
            const formData = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                dob: document.getElementById('dob').value,
                gender: document.getElementById('gender').value,
                course: document.getElementById('course').value,
                enrollmentYear: document.getElementById('year').value,
                percentage: document.getElementById('percentage').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value,
            };
    
            try {
                // Make POST request using Axios
                 console.log(formData)
                const response = await axios.post('http://localhost:5000/api/enroll', formData);
    
                // Handle successful response
                alert(`Success: ${response.data.message}`);
                console.log('Response:', response.data);
                form.reset(); // Reset the form
            } catch (error) {
                // Handle error response
                if (error.response) {
                    alert(`Error: ${error.response.data.message}`);
                    console.error('Server Error:', error.response.data);
                } else {
                    alert('Error submitting form');
                    console.error('Error:', error);
                }
            }
        });
    });
    
 
</script>

</html>